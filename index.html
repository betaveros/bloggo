<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8" />
<title>Bounded-Error Log</title>

<meta name="author" content="betaveros" />
<meta name="description" content="" /><meta name="generator" content="Hugo 0.102.0-DEV" />

<link rel="canonical" href="//blog.vero.site/" />
<link rel="alternative" href="/index.xml" title="Bounded-Error Log" type="application/atom+xml" />

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />

<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />
<meta name="theme-color" content="#330000" />
<meta name="twitter:creator" content="@betaveros">

<link rel="icon" href="/favicon.ico" />

<link rel="stylesheet" href="/css/bundle.css" />
<link rel="stylesheet" href="/katex/katex.min.css" />

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

</head>
<body>
<div id="wrapper">
<header class="site-header"><h1 class="title"><a href="/">Bounded-Error Log</a></h1><p class="subtitle">theoretical and applied randomness by <a href="https://beta.vero.site/">betaveros</a></p>
<button class="menu-toggle" type="button" aria-label="Toggle Menu">
	<span class="icon icon-menu" aria-hidden="true"></span>
</button>
<nav class="site-menu collapsed">
	<h2 class="offscreen">Main Menu</h2>
	<ul class="menu-list"><li class="menu-item "><a href="/about">About</a></li><li class="menu-item "><a href="/category/life">Life</a></li><li class="menu-item "><a href="/category/thoughts">Thoughts</a></li><li class="menu-item "><a href="/category/self-analysis">Self-Analysis</a></li><li class="menu-item "><a href="/category/math">Math</a></li><li class="menu-item "><a href="/category/cs">CS</a></li><li class="menu-item "><a href="/category/puzzles">Puzzles</a></li><li class="menu-item "><a href="/category/meta">Meta</a></li><li class="menu-item "><a href="/ref">References</a></li><li class="menu-item "><a href="/util">Utilities</a></li><li class="menu-item "><a href="/all">All Posts</a></li></ul>
</nav>
<nav class="social-menu collapsed">
	<h2 class="offscreen">Social Networks</h2>
	<ul class="social-list"><li class="social-item">
			<a href="//github.com/betaveros" title="GitHub" aria-label="GitHub"><span class="icon icon-github" aria-hidden="true"></span></a>

		</li><li class="social-item">
			<a href="/index.xml" title="RSS" aria-label="RSS"><span class="icon icon-rss" aria-hidden="true"></span></a>
		</li>
	</ul>
</nav>
</header>

<section class="main post-list">
	<header class="list-header offscreen">
		<h2 class="list-label">Everything</h2>
	</header>
	
	
		
			<article class="post-entry">
	<header class="post-header">
		<h3 class="post-title"><a href="//blog.vero.site/post/concurrency" class="post-link">Concurrency</a></h3>
		
		<p class="post-meta">
		
		2023-09-25
		(3090 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/cs">CS</a>
		</span>
		
		</p>
	</header>
	
	<p>I want to add a second word in the title, something like “Koans” or “Vignettes”, but I don’t know a word with the right connotations.</p>
<p>I realized recently that I have been walking around for a long time with some confusion and unknown unknowns about how concurrency works in various settings, and decided to write about it until I stopped being confused. This post doesn’t therefore have much of a “point”.</p>
<h3 id="concurrency-and-parallelism">Concurrency and Parallelism</h3>
<p>Wikipedia, as of time of writing:</p>
<blockquote>
<p><strong>Concurrency</strong> is the ability of different parts or units of a program, algorithm, or problem to be executed out-of-order or in partial order, without affecting the outcome.</p>
</blockquote>
<p>There are two broad reasons concurrency is useful. One is for performance: if you want your computer to perform as many floating point operations as possible by lunchtime, you want all CPUs/GPUs/etc. to be performing operations simultaneously. Another is that you’re in a problem domain where you simply can’t predict the order of events: you’re writing a user interface, and the user can click on any of multiple buttons in any order; or you’re writing a web server, and any number of clients can request any pages in any order. These reasons are not mutually exclusive.</p>
	<footer class="post-footer">
		<a class="read-more" href="//blog.vero.site/post/concurrency">→ read more<span class="offscreen"> Concurrency</span></a>
	</footer>
</article>

		
			<article class="post-entry">
	<header class="post-header">
		<h3 class="post-title"><a href="//blog.vero.site/post/diceware" class="post-link">Yet Another Diceware-Style Word List</a></h3>
		
		<p class="post-meta">
		
		2023-07-23
		(2140 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/cs">CS</a>
		</span>
		
		</p>
	</header>
	
	<p>Passwords. It’s 2023 and we still have to deal with them.</p>
<p>Many people know that, per the <a href="https://xkcd.com/936/">canonical xkcd</a>, sequences of randomly chosen words such as</p>
<div style="text-align: center">
<span id="diceware-out" style="font-size: 1.25rem">soak-science-wander-pew-goldfish-xray-speed-consult</span><br/><button id="diceware-regen" class="btn" style="display: none">regenerate</button><small> or <a href="/misc/betaveros-diceware.txt">get the list as .txt</a> or a <a href="/misc/betaveros-diceware.html">standalone generator</a><span id="diceware-msg"> (if my JavaScript were working the above would be a random password and you wouldn’t be seeing this message)</span></small>
</div>
<script src="/js/diceware.js"></script>
<p>make relatively memorable but hard-to-crack passwords. One popular strategy for randomly choosing words is Arnold Reinhold’s <a href="https://theworld.com/~reinhold/diceware.html">Diceware™</a>, a list of 6<sup>5</sup> = 7776 “words” that you can randomly sample from by rolling five dice (analog or digital). (I won’t go into topics like how to calculate the entropy of passwords and how long a password you should try to have here, since most Diceware overviews already discuss them at length.)</p>
<figure>
<a href="/img/dice.png"><img src="/img/dice.png" alt="Five dice arranged in a V shape, digitally altered to be red" /></a>
<figcaption>
Somehow this image was already on my blog without being used in any post, but if there’s a post it belongs in, it’s surely this one
</figcaption>
</figure>
<p>A few people have iterated on the concept since then: probably most notably, the Electronic Frontier Foundation published their own <a href="https://www.eff.org/deeplinks/2016/07/new-wordlists-random-passphrases">word list</a> in 2016, with words chosen to be more well-known and memorable, at the cost of taking longer to type. I’m a fast typer and prefer the EFF’s wordlist over the original, and am very grateful to them for creating it, but after generating quite a few passwords with it over the last few years, I began to feel that it still had a lot of room for improvement.</p>
	<footer class="post-footer">
		<a class="read-more" href="//blog.vero.site/post/diceware">→ read more<span class="offscreen"> Yet Another Diceware-Style Word List</span></a>
	</footer>
</article>

		
			<article class="post-entry">
	<header class="post-header">
		<h3 class="post-title"><a href="//blog.vero.site/post/noulith" class="post-link">Designing a Programming Language to Speedrun Advent of Code</a></h3>
		
		<p class="post-meta">
		
		2023-04-09
		(17333 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/cs">CS</a>
		</span>
		
		</p>
	</header>
	
	<div class="series">
<p>“shouldn’t this have been published a few months ago?” yeah, probably. I even considered submitting it to the <a href="https://www.reddit.com/r/adventofcode/comments/z9he28/advent_of_code_2022_mistiltoe_elfucation/">AoC contest</a>. time is a real beast.</p>
</div>
<p>The title is clickbait. I did not design and implement a programming language for the sole or even primary purpose of leaderboarding on Advent of Code. It just turned out that the programming language I was working on fit the task remarkably well.</p>
<p>I can’t name just a single reason I started work on my language, <a href="https://github.com/betaveros/noulith">Noulith</a>, back in July 2022, but I think the biggest one was even more absurdly niche: I solve and write a lot of <a href="https://blog.vero.site/post/puzzlehunts">puzzlehunts</a>, and I wanted a better programming language to use to search word lists for words satisfying unusual constraints, such as, “Find all ten-letter words that contain each of the letters A, B, and C exactly once and that have the ninth letter K.”<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> I have a folder of ten-line scripts of this kind, mostly Python, and I thought there was surely a better way to do this. Not necessarily faster — there is obviously no way I could <a href="https://xkcd.com/1205/">save time on net by optimizing this process</a>. But, for example, I wanted to be able to easily share these programs such that others could run them. I had a positive experience in this with my slightly older golflang <a href="https://github.com/betaveros/paradoc">Paradoc</a>, which I had compiled into a WASM blob and <a href="https://betaveros.github.io/paradoc-rust/">put online</a> and, just once, experienced the convenience of sharing a <a href="https://betaveros.github.io/paradoc-rust/#aVVje0FwcVdwfH1mV8OYKXNqIHI=">short text processing program</a> through a link. (Puzzle: what does this program do?) I also wanted to write and run these programs while booted into a different operating system, using a different computer, or just on my phone.</p>
<p>As I worked on it, I kept accumulating reasons to keep going. There were other contexts where I wanted to quickly code a combinatorial brute force that was annoying to write in other languages; a glib phrasing is that I wanted access to Haskell’s list monad in a sloppier language. I also wanted an excuse to read <a href="https://craftinginterpreters.com/"><cite>Crafting Interpreters</cite></a> more thoroughly. But sometimes I think the best characterization for what developing the language “felt like” was that I had been possessed by a supernatural creature — say, the dragon from the <a href="https://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools">Dragon Book</a>. I spent every spare minute thinking about language features and next implementation steps, because I had to.</p>
<p>The first “real program” I wrote in Noulith was to brute force constructions for <a href="https://2022.galacticpuzzlehunt.com/puzzle/the-cube">The Cube</a>, for last year’s Galactic Puzzle Hunt in early August, and it worked unexpectedly well. I wrote a <code>for</code> loop with a 53-clause iteratee and the interpreter executed it smoothly. Eventually I realized that the language could expand into other niches in my life where I wanted a scripting language. For example, I did a few <a href="https://www.cryptopals.com/">Cryptopals challenges</a> in them. It would take a month or two before it dawned on me that the same compulsion that drove me to create this language would drive me to do Advent of Code in it. That’s just how it has to be.</p>
<p>This post details my thought process behind the design of this language. Some preliminary notes:</p>
	<footer class="post-footer">
		<a class="read-more" href="//blog.vero.site/post/noulith">→ read more<span class="offscreen"> Designing a Programming Language to Speedrun Advent of Code</span></a>
	</footer>
</article>

		
			<article class="post-entry">
	<header class="post-header">
		<h3 class="post-title"><a href="//blog.vero.site/post/2023-hunt" class="post-link">2023 MIT Mystery Hunt</a></h3>
		
		<p class="post-meta">
		
		2023-01-25
		(4533 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/puzzles">Puzzles</a>
		</span>
		
		</p>
	</header>
	
	<p>My seventh year doing Mystery Hunt with ✈✈✈ Galactic Trendsetters ✈✈✈, and after a hiatus it was in person again! This also makes it my first in-person Mystery Hunt as an alumnus, where I flew in and stayed at a hotel. How time marches on… I appreciated getting to see everybody on Galactic, as well as quite a few internet puzzlers at the location where all the cool people always go, Flour Bakery and Cafe.</p>
<p>Campus hadn’t changed too much. There were more card readers, but also fancy kiosks where ID cards could be printed on demand (via the official 1.2/5★-rated app). I set aside a little time before kickoff to try to locate a working kiosk to print my ID, but the two kiosks I found west of Mass Ave, in W20 and W35, were both out of order; only much later did I print a card in 16. But I am a card-carrying alumnus now. Galactic had two classrooms in 4-2 and lots of masks and tests. One of my teammates brought their dog. It was a fun time.</p>
<p>As typical nowadays, the hunt announcement and kickoff began with a facade theme of a museum. However, the twist was handled a bit differently — kickoff had an additional diegetic level: normally the story is followed by an out-of-character talk about health/safety and policies, but this year that talk, while still in a different universe from the museum, was intertwined with an introduction to MATE, the AI who had ostensibly been writing all the puzzles. Over the course of the hunt, instead of discovering a possibly predictable secret plan or betrayal by MATE, we instead found ourselves on its side because (in the outer fictional diegetic level) teammate had shut off some other “overly creative” AIs and overworked MATE.</p>
	<footer class="post-footer">
		<a class="read-more" href="//blog.vero.site/post/2023-hunt">→ read more<span class="offscreen"> 2023 MIT Mystery Hunt</span></a>
	</footer>
</article>

		
			<article class="post-entry">
	<header class="post-header">
		<h3 class="post-title"><a href="//blog.vero.site/post/one-step" class="post-link">One Step Forward to Tomorrow</a></h3>
		
		<p class="post-meta">
		
		2022-12-31
		(1074 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/life">Life</a>
		</span>
		
		</p>
	</header>
	
	<p>One day I’m going to run out of the energy to find barely adequate allusions for the titles and thematic music videos for the openings of these end-of-year posts, and they’ll just be called “2095 in Review” or whatever. Or maybe I’ll just stop making them. But not today.</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/tuHe9lm5vUE" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>Good song. Good animation. Incredibly out of place on its YouTube channel, in the most inspiring chaotic good way.</p>
<hr />
<p>I closed out last year by saying that I wanted to accomplish a “big milestone” this year. I actually had a specific milestone in mind that I did not actually achieve and will not reveal, but I made good progress towards it, and a lot of other things happened, enough that I think I’ll count that as achieved.</p>
<p>The big thing is that I left my job at Zoom to have some time for myself and family… though not before helping to give feedback on a <a href="https://datatracker.ietf.org/doc/draft-irtf-cfrg-vrf/">draft internet standard</a>, publish a <a href="https://eprint.iacr.org/2022/1264">cryptography research paper</a> (on which I’m the “first author”, strictly due to the vagaries of the English alphabet), and launch <a href="https://blog.zoom.us/zoom-end-to-end-encrypted-email/">end-to-end encrypted email</a>. It was a productive year! I feel like I should have more to say about all this, but it’s hard to think of anything that I didn’t already write about <a href="//blog.vero.site/post/coming">last year</a> and also doesn’t require a blockbuster-length list of prerequisites. However, if you ever want to hear about the difficulties of actually getting end-to-end encryption into production in excruciating detail, invite me to a cocktail party with a lot of whiteboards.</p>
	<footer class="post-footer">
		<a class="read-more" href="//blog.vero.site/post/one-step">→ read more<span class="offscreen"> One Step Forward to Tomorrow</span></a>
	</footer>
</article>

		
			<article class="post-entry">
	<header class="post-header">
		<h3 class="post-title"><a href="//blog.vero.site/post/golf" class="post-link">Introduction to Code Golf and Golflangs</a></h3>
		
		<p class="post-meta">
		
		2022-12-22
		(9290 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/cs">CS</a>
		</span>
		
		</p>
	</header>
	
	<p>Code golf is the recreational activity<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> of trying to write programs that are as short as possible.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> Golfed programs still have to be correct, but brevity is prioritized above every other concern — e.g., robustness, performance, or legibility — which usually leads to really interesting code.</p>
<p>I think code golf is a lot of fun (although I think a lot of things are fun, so it’s one of those hobbies that I get really into roughly one month every year and then completely forget about for the remaining eleven). I wanted to write an introduction because I don’t know of any good general introductions to code golf, particularly ones that try to be language-agnostic and that cover the fascinating world of <em>programming languages designed specifically for code golf</em>, which I’ll call golflangs for short. But more on that later.</p>
<p>Note: If you are the kind of person who prefers to just dive in and try golfing some code without guidance, you should skip to the <a href="#code-golf-sites">code golf sites</a> section.</p>
<h3 id="a-simple-example">A simple example</h3>
<p>Of course, there’s a reason most code golf tutorials focus on a single language: most code golf techniques are language-specific. The Code Golf &amp; Coding Challenges (CGCC) StackExchange community has a list of some <a href="https://codegolf.stackexchange.com/questions/5285/tips-for-golfing-in-all-languages">golfing tips that apply to most languages</a>, but there are far more tricks in just about any language-specific list, and most of the intrigue lies in knowing the language you’re golfing well. So to provide a taste of the code golf experience, let’s golf a simple problem, Anarchy Golf’s <a href="http://golf.shinh.org/p.rb?Factorial">Factorial</a>, in Python.</p>
<p>In this problem, we have to read a series of positive integers from standard input, one per line, and output the factorial of each, also one per line. Here’s a stab at a simple, direct implementation with no golfing at all:<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">def</span> factorial(n):</a>
<a class="sourceLine" id="cb1-2" title="2">    <span class="cf">if</span> n <span class="op">&lt;=</span> <span class="dv">1</span>: <span class="cf">return</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="cf">return</span> n <span class="op">*</span> factorial(n<span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="cf">try</span>:</a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="cf">while</span> <span class="va">True</span>:</a>
<a class="sourceLine" id="cb1-6" title="6">        <span class="bu">print</span>(factorial(<span class="bu">int</span>(<span class="bu">input</span>())))</a>
<a class="sourceLine" id="cb1-7" title="7"><span class="cf">except</span> <span class="pp">EOFError</span>:</a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="cf">pass</span></a></code></pre></div>
	<footer class="post-footer">
		<a class="read-more" href="//blog.vero.site/post/golf">→ read more<span class="offscreen"> Introduction to Code Golf and Golflangs</span></a>
	</footer>
</article>

		
			<article class="post-entry">
	<header class="post-header">
		<h3 class="post-title"><a href="//blog.vero.site/post/flexbox-fun" class="post-link">Flexbox Fun Facts</a></h3>
		
		<p class="post-meta">
		
		2022-09-23
		(1458 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/cs">CS</a>
		</span>
		
		</p>
	</header>
	
	<p>This post is brought to you by “I am procrastinating other stuff by doing some long overdue maintenance on my blog”. Mainly, I finally replaced the old <code>float</code>-based layout from the random Hugo theme I forked, which I had been keeping just because it wasn’t broken, with flexbox, so that I could more easily tweak some other things. If things look broken, you may need to force-refresh or clear your cache, and on the off chance things look mostly the same but you feel like something about the layout feels subtly different, that’s what’s up.</p>
<p>While making these changes, I ended up digging through the <a href="https://www.w3.org/TR/2018/CR-css-flexbox-1-20181119/">flexbox spec</a> to debug an issue and learned some interesting things. (This and other links in this post are permalinks to the November 2018 spec, which I believe is the most recent official version as of time of writing, but it’s nearly three years and there have been quite a few changes in the “editor’s draft”. Also, this post is not a flexbox tutorial and will not make sense if you are already familiar with flexbox.)</p>
	<footer class="post-footer">
		<a class="read-more" href="//blog.vero.site/post/flexbox-fun">→ read more<span class="offscreen"> Flexbox Fun Facts</span></a>
	</footer>
</article>

		
			<article class="post-entry">
	<header class="post-header">
		<h3 class="post-title"><a href="//blog.vero.site/post/pppordle" class="post-link">🅿️🅿️🅿️ordle</a></h3>
		
		<h4 class="post-subtitle">PlaidCTF 2022 (350 points)</h4>
		
		<p class="post-meta">
		
		2022-07-04
		(1890 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/cs">CS</a>
		</span>
		
		</p>
	</header>
	
	<p>Don’t you hate it when CTFs happen faster than you can write them up? This is probably the only PlaidCTF challenge I get to, unfortunately.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<blockquote>
<p>Web is out, retro is in. Play your favorite word game from the comfort of your terminal!</p>
</blockquote>
<p>It’s a terminal Wordle client!</p>
<figure>
<a href="/img/pppordle-1.png"><img src="/img/pppordle-1.png" alt="Screenshot of a terminal Wordle client. The puzzle has been solved with the answer COZEY." /></a>
</figure>
<p>I only solved the first half of this challenge. The two halves seem to be unrelated though. (Nobody solved the second half during the CTF.) The challenge was quite big code-wise, with more than a dozen files, so it’s hard to replicate the experience in a post like this, but here’s an attempt.</p>
	<footer class="post-footer">
		<a class="read-more" href="//blog.vero.site/post/pppordle">→ read more<span class="offscreen"> 🅿️🅿️🅿️ordle</span></a>
	</footer>
</article>

		
			<article class="post-entry">
	<header class="post-header">
		<h3 class="post-title"><a href="//blog.vero.site/post/mask" class="post-link">Mask</a></h3>
		
		<h4 class="post-subtitle">ångstromCTF 2022 (200 points)</h4>
		
		<p class="post-meta">
		
		2022-07-04
		(2519 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/cs">CS</a>
		</span>
		
		</p>
	</header>
	
	<blockquote>
<p>Don’t forget to wear your mask…</p>
<p><code>nc challs.actf.co 31501</code></p>
</blockquote>
<p>If I had a nickel for every <a href="//blog.vero.site/post/messy-desk">CTF challenge I’ve done</a> that involves understanding the internal structure of a QR code, I would have two nickels. Which isn’t a lot, etc etc. That previous challenge probably helped me get first blood on this.</p>
<p>The source code is wonderfully short:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1"><span class="im">import</span> io, qrcode, string</a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3">flag_contents <span class="op">=</span> [REDACTED]</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="cf">assert</span> <span class="bu">all</span>(i <span class="kw">in</span> string.ascii_lowercase <span class="op">+</span> <span class="st">&#39;_&#39;</span> <span class="cf">for</span> i <span class="kw">in</span> flag_contents)</a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6">flag <span class="op">=</span> b<span class="st">&quot;actf{&quot;</span> <span class="op">+</span> flag_contents.encode() <span class="op">+</span> b<span class="st">&quot;}&quot;</span></a>
<a class="sourceLine" id="cb1-7" title="7"><span class="bu">print</span>(<span class="st">&quot;flag is </span><span class="sc">%d</span><span class="st"> characters&quot;</span> <span class="op">%</span> <span class="bu">len</span>(flag))</a>
<a class="sourceLine" id="cb1-8" title="8"></a>
<a class="sourceLine" id="cb1-9" title="9">qr <span class="op">=</span> qrcode.QRCode(version<span class="op">=</span><span class="dv">1</span>, error_correction <span class="op">=</span> qrcode.constants.ERROR_CORRECT_L, box_size<span class="op">=</span><span class="dv">1</span>, border<span class="op">=</span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb1-10" title="10"><span class="cf">while</span> <span class="dv">1</span>:</a>
<a class="sourceLine" id="cb1-11" title="11">    <span class="cf">try</span>:</a>
<a class="sourceLine" id="cb1-12" title="12">        inp <span class="op">=</span> <span class="bu">bytes</span>.fromhex(<span class="bu">input</span>(<span class="st">&quot;give input (in hex): &quot;</span>))</a>
<a class="sourceLine" id="cb1-13" title="13">        <span class="cf">assert</span> <span class="bu">len</span>(inp) <span class="op">==</span> <span class="bu">len</span>(flag)</a>
<a class="sourceLine" id="cb1-14" title="14">    <span class="cf">except</span>:</a>
<a class="sourceLine" id="cb1-15" title="15">        <span class="bu">print</span>(<span class="st">&quot;bad input, exiting&quot;</span>)</a>
<a class="sourceLine" id="cb1-16" title="16">        <span class="cf">break</span></a>
<a class="sourceLine" id="cb1-17" title="17">    qr.clear()</a>
<a class="sourceLine" id="cb1-18" title="18">    qr.add_data(<span class="bu">bytes</span>([i<span class="op">^</span>j <span class="cf">for</span> i,j <span class="kw">in</span> <span class="bu">zip</span>(inp, flag)]))</a>
<a class="sourceLine" id="cb1-19" title="19">    f <span class="op">=</span> io.StringIO()</a>
<a class="sourceLine" id="cb1-20" title="20">    qr.print_ascii(out<span class="op">=</span>f)</a>
<a class="sourceLine" id="cb1-21" title="21">    f.seek(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb1-22" title="22">    <span class="bu">print</span>(<span class="st">&#39;</span><span class="ch">\n</span><span class="st">&#39;</span>.join(i[:<span class="dv">11</span>] <span class="cf">for</span> i <span class="kw">in</span> f))</a></code></pre></div>
	<footer class="post-footer">
		<a class="read-more" href="//blog.vero.site/post/mask">→ read more<span class="offscreen"> Mask</span></a>
	</footer>
</article>

		
			<article class="post-entry">
	<header class="post-header">
		<h3 class="post-title"><a href="//blog.vero.site/post/kevin-higgs" class="post-link">Kevin Higgs</a></h3>
		
		<h4 class="post-subtitle">ångstromCTF 2022 (210 points)</h4>
		
		<p class="post-meta">
		
		2022-07-04
		(1366 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/cs">CS</a>
		</span>
		
		</p>
	</header>
	
	<blockquote>
<p>Now that kmh is gone, clam’s been going through pickle withdrawal. To help him cope, he wrote his own pickle pyjail. It’s nothing like kmh’s, but maybe it’s enough.</p>
</blockquote>
<p>Language jails are rapidly becoming one of my CTF areas of expertise. Not sure how I feel about that.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1"><span class="co">#!/usr/local/bin/python3</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="im">import</span> pickle</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="im">import</span> io</a>
<a class="sourceLine" id="cb1-5" title="5"><span class="im">import</span> sys</a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7">module <span class="op">=</span> <span class="bu">type</span>(__builtins__)</a>
<a class="sourceLine" id="cb1-8" title="8">empty <span class="op">=</span> module(<span class="st">&quot;empty&quot;</span>)</a>
<a class="sourceLine" id="cb1-9" title="9">empty.empty <span class="op">=</span> empty</a>
<a class="sourceLine" id="cb1-10" title="10">sys.modules[<span class="st">&quot;empty&quot;</span>] <span class="op">=</span> empty</a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12"></a>
<a class="sourceLine" id="cb1-13" title="13"><span class="kw">class</span> SafeUnpickler(pickle.Unpickler):</a>
<a class="sourceLine" id="cb1-14" title="14">    <span class="kw">def</span> find_class(<span class="va">self</span>, module, name):</a>
<a class="sourceLine" id="cb1-15" title="15">        <span class="cf">if</span> module <span class="op">==</span> <span class="st">&quot;empty&quot;</span> <span class="kw">and</span> name.count(<span class="st">&quot;.&quot;</span>) <span class="op">&lt;=</span> <span class="dv">1</span>:</a>
<a class="sourceLine" id="cb1-16" title="16">            <span class="cf">return</span> <span class="bu">super</span>().find_class(module, name)</a>
<a class="sourceLine" id="cb1-17" title="17">        <span class="cf">raise</span> pickle.UnpicklingError(<span class="st">&quot;e-legal&quot;</span>)</a>
<a class="sourceLine" id="cb1-18" title="18"></a>
<a class="sourceLine" id="cb1-19" title="19"></a>
<a class="sourceLine" id="cb1-20" title="20">lepickle <span class="op">=</span> <span class="bu">bytes</span>.fromhex(<span class="bu">input</span>(<span class="st">&quot;Enter hex-encoded pickle: &quot;</span>))</a>
<a class="sourceLine" id="cb1-21" title="21"><span class="cf">if</span> <span class="bu">len</span>(lepickle) <span class="op">&gt;</span> <span class="dv">400</span>:</a>
<a class="sourceLine" id="cb1-22" title="22">    <span class="bu">print</span>(<span class="st">&quot;your pickle is too large for my taste &gt;:(&quot;</span>)</a>
<a class="sourceLine" id="cb1-23" title="23"><span class="cf">else</span>:</a>
<a class="sourceLine" id="cb1-24" title="24">    SafeUnpickler(io.BytesIO(lepickle)).load()</a></code></pre></div>
<p><code><a href="https://docs.python.org/3/library/pickle.html">pickle</a></code> is a Python object serialization format. As the docs page loudly proclaims, it is not secure. Roughly the simplest possible code to pop a shell (adapted from <a href="https://davidhamann.de/2020/04/05/exploiting-python-pickle/">David Hamann</a>, who constructs a more realistic RCE) looks like:</p>
	<footer class="post-footer">
		<a class="read-more" href="//blog.vero.site/post/kevin-higgs">→ read more<span class="offscreen"> Kevin Higgs</span></a>
	</footer>
</article>

		
	
	
	<footer class="list-footer">
		<nav class="pagination">
			<h3 class="offscreen">Pagination</h3>
			
			
				<a class="pagination-next" href="/page/2">Older Posts →</a>
			
		</nav>
	</footer>
	
</section>
</div>
<footer class="site-footer">
	<p>© 2017-2023 betaveros, Bounded-Error Log</p>
	<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />Except where otherwise noted, content on this site is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
	<p>Powered by <a href="https://gohugo.io/">Hugo</a>, <a href="http://pandoc.org/">pandoc</a>,
	<a href="https://www.goatcounter.com/">GoatCounter</a>,
	<a href="https://posativ.org/isso/">Isso</a>,
	<a href="https://pages.github.com/">GitHub Pages</a>, and
	<a href="https://www.cloudflare.com/">CloudFlare</a>.
	</p>
	<p>Opinions are mine and not of any employer, past or present.</p>
</footer>

<script src="/katex/katex.min.js"></script>
<script src="/katex/contrib/auto-render.min.js"></script>
<script>renderMathInElement(document.body);</script>
<script src="/js/bundle.js"></script>
<script>window.goatcounter = { path: function(p) { return '/blog' + p; } }</script>
<script data-goatcounter="https://node.vero.site:8073/count" async src="https://node.vero.site:8073/count.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>


</body>
</html>
