<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8" />
<title>Multiplication by Juxtaposition</title>

<meta name="author" content="betaveros" />
<meta name="description" content="We interrupt the irregularly scheduled philosophical posts for some programming memes:
Over the last few days, the Internet has divided itself over what the value of the expression 8÷2(2&#43;2) should be. Some say it should be evaluated as (8÷2)×(2&#43;2) = 16. Some say it should be evaluated as 8÷(2×(2&#43;2)) = 1.
At the risk of belaboring the obvious, the core dispute here is not really mathematical. There is not some sequence of mathematical operations that produces some number, where mathematicians disagree about what number it produces. Instead, this is a dispute about mathematical notation: what sequence of mathematical operations the expression corresponds to the way it’s written. Specifically, it is a dispute about whether multiplication written as juxtaposition (how “2” is written right next to “(2&#43;2)”) has strictly higher precedence than division. It is closer to a linguistic or typographical dispute than a purely mathematical one, and the correct answer to the dispute is that whoever wrote the expression that way should learn to write math better.
This debate is not even new. The internet had fun arguing over 48÷2(9&#43;3) and 6÷2(1&#43;2), which are functionally identical ambiguous expressions, eight years ago. I don’t know why the debate is resurging now and why we still haven’t gotten tired of it.
But life is short, so since we’re here anyway, let’s make some additional memes.
Asking the computer Some of my coworkers had the idea to ask some programming languages what the answer was. The results were underwhelming.
$ python3 Python 3.6.7 (default, Oct 22 2018, 11:32:17) [GCC 8.2.0] on linux Type &amp;quot;help&amp;quot;, &amp;quot;copyright&amp;quot;, &amp;quot;credits&amp;quot; or &amp;quot;license&amp;quot; for more information. &amp;gt;&amp;gt;&amp;gt; 8/2(2&#43;2) Traceback (most recent call last): File &amp;quot;&amp;lt;stdin&amp;gt;&amp;quot;, line 1, in &amp;lt;module&amp;gt; TypeError: &amp;#39;int&amp;#39; object is not callable" /><meta name="generator" content="Hugo 0.102.0-DEV" />

<link rel="canonical" href="//blog.vero.site/post/multiplication" />
<link rel="alternative" href="/index.xml" title="Bounded-Error Log" type="application/atom+xml" />

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />

<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />
<meta name="theme-color" content="#330000" />
<meta name="twitter:creator" content="@betaveros">

<link rel="icon" href="/favicon.ico" />

<link rel="stylesheet" href="/css/bundle.css" />
<link rel="stylesheet" href="/katex/katex.min.css" />

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

</head>
<body>
<div id="wrapper">
<header class="site-header"><h2 class="title"><a href="/">Bounded-Error Log</a></h2><p class="subtitle">theoretical and applied randomness by <a href="https://beta.vero.site/">betaveros</a></p>
<button class="menu-toggle" type="button" aria-label="Toggle Menu">
	<span class="icon icon-menu" aria-hidden="true"></span>
</button>
<nav class="site-menu collapsed">
	<h2 class="offscreen">Main Menu</h2>
	<ul class="menu-list"><li class="menu-item "><a href="/about">About</a></li><li class="menu-item "><a href="/category/life">Life</a></li><li class="menu-item "><a href="/category/thoughts">Thoughts</a></li><li class="menu-item "><a href="/category/self-analysis">Self-Analysis</a></li><li class="menu-item "><a href="/category/math">Math</a></li><li class="menu-item "><a href="/category/cs">CS</a></li><li class="menu-item "><a href="/category/puzzles">Puzzles</a></li><li class="menu-item "><a href="/category/meta">Meta</a></li><li class="menu-item "><a href="/ref">References</a></li><li class="menu-item "><a href="/util">Utilities</a></li><li class="menu-item "><a href="/all">All Posts</a></li></ul>
</nav>
<nav class="social-menu collapsed">
	<h2 class="offscreen">Social Networks</h2>
	<ul class="social-list"><li class="social-item">
			<a href="//github.com/betaveros" title="GitHub" aria-label="GitHub"><span class="icon icon-github" aria-hidden="true"></span></a>

		</li><li class="social-item">
			<a href="/index.xml" title="RSS" aria-label="RSS"><span class="icon icon-rss" aria-hidden="true"></span></a>
		</li>
	</ul>
</nav>
</header>

<section class="main post-detail">
	<header>
		<h1 class="post-title">Multiplication by Juxtaposition</h1>
		
		<h2 class="post-subtitle">Evaluating 8÷2(2&#43;2) in Haskell (and some other languages)</h2>
		
		<p class="post-meta">
		
		2019-08-04
		(2661 words)
		
		<span class="post-categories">
			filed under
			<a href="/category/cs">CS</a>
		</span>
		
		</p>
	</header>
	<article><p>We interrupt the irregularly scheduled philosophical posts for some programming memes:</p>
<p>Over the last few days, the Internet has divided itself over what the value of the expression 8÷2(2+2) should be. Some say it should be evaluated as (8÷2)×(2+2) = 16. Some say it should be evaluated as 8÷(2×(2+2)) = 1.</p>
<p>At the risk of belaboring the obvious, the core dispute here is not really mathematical. There is not some sequence of mathematical operations that produces some number, where mathematicians disagree about what number it produces. Instead, this is a dispute about mathematical notation: what sequence of mathematical operations the expression corresponds to the way it’s written. Specifically, it is a dispute about whether multiplication written as juxtaposition (how “2” is written right next to “(2+2)”) has strictly higher precedence than division. It is closer to a linguistic or typographical dispute than a purely mathematical one, and the correct answer to the dispute is that whoever wrote the expression that way should learn to write math better.</p>
<p>This debate is not even new. The internet had fun arguing over <a href="https://knowyourmeme.com/memes/48293">48÷2(9+3) and 6÷2(1+2)</a>, which are functionally identical ambiguous expressions, eight years ago. I don’t know why the debate is resurging now and why we still haven’t gotten tired of it.</p>
<p>But life is short, so since we’re here anyway, let’s make some additional memes.</p>
<h3 id="asking-the-computer">Asking the computer</h3>
<p>Some of my coworkers had the idea to ask some programming languages what the answer was. The results were underwhelming.</p>
<pre><code>$ python3
Python 3.6.7 (default, Oct 22 2018, 11:32:17)
[GCC 8.2.0] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; 8/2(2+2)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: &#39;int&#39; object is not callable</code></pre>
<pre><code>$ cat meme.c
#include &lt;stdio.h&gt;
int main() {
    printf(&quot;%d\n&quot;, 8/2(2+2));
}
$ gcc meme.c
meme.c: In function ‘main’:
meme.c:3:19: error: called object is not a function or function pointer
  printf(&quot;%d\n&quot;, 8/2(2+2));</code></pre>
<pre><code>$ node
&gt; 8/2(2+2)
TypeError: 2 is not a function</code></pre>
<p>I will note right away that we are using <code>/</code> instead of <code>÷</code> in these snippets. This changes the expression, but I think the two operators have similar connotations of precedence and nobody uses the ÷ sign after grade school anyway, so I think this replacement doesn’t affect the dispute too much.</p>
<p>By the way, you can ask these programming languages and many more to evaluate <code>8/2*(2+2)</code> and they will happily do it, almost certainly arriving at the answer <code>16</code> (or <code>16.0</code>), because division and multiplication have the same precedence and are evaluated left-to-right. However, I think this ends up being a different dispute completely. The core dispute is not how division’s precedence compares to multiplication, but how it compares to juxtaposition, which might have different precedence properties even though it represents the same mathematical operation as the multiplication sign.</p>
<p>Anyway, not willing to give up, I tried to see if Haskell could give us an answer:<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<pre><code>$ ghci
GHCi, version 8.0.2: http://www.haskell.org/ghc/  :? for help
Loaded GHCi configuration from /home/akriloth/.ghci
λ&gt; 8/2(2+2)

&lt;interactive&gt;:1:1: error:
    • Non type-variable argument in the constraint: Num (t -&gt; a)
      (Use FlexibleContexts to permit this)
    • When checking the inferred type
        it :: forall t a. (Num (t -&gt; a), Num t, Fractional a) =&gt; a</code></pre>
<h3 id="down-the-haskell-rabbit-hole">Down the Haskell rabbit hole</h3>
<p>It doesn’t work right away, but the compiler suggests a compiler flag, which we can try:</p>
<pre><code>λ&gt; :set -XFlexibleContexts
λ&gt; 8/2(2+2)

&lt;interactive&gt;:3:1: error:
    • Could not deduce (Num t0)
      from the context: (Num (t -&gt; a), Num t, Fractional a)
        bound by the inferred type for ‘it’:
                   (Num (t -&gt; a), Num t, Fractional a) =&gt; a
        at &lt;interactive&gt;:3:1-8
      The type variable ‘t0’ is ambiguous
    • In the ambiguity check for the inferred type for ‘it’
      To defer the ambiguity check to use sites, enable AllowAmbiguousTypes
      When checking the inferred type
        it :: forall t a. (Num (t -&gt; a), Num t, Fractional a) =&gt; a</code></pre>
<p>A second compiler flag? We can try again:</p>
<pre><code>λ&gt; :set -XAllowAmbiguousTypes
λ&gt; 8/2(2+2)

&lt;interactive&gt;:5:1: error:
    • No instance for (Num (t0 -&gt; a0)) arising from a use of ‘it’
        (maybe you haven&#39;t applied a function to enough arguments?)
    • In a stmt of an interactive GHCi command: print it</code></pre>
<p>This gets at the essence of why Haskell can’t evaluate the expression, and how we might go about making it work. What is the type of an integer literal like <code>2</code> in Haskell?</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb7-1" title="1">λ<span class="op">&gt;</span> <span class="op">:</span>t <span class="dv">2</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="dv">2</span><span class="ot"> ::</span> <span class="dt">Num</span> t <span class="ot">=&gt;</span> t</a></code></pre></div>
<p>The integer literal can actually be of any type that is an instance of the <em>typeclass</em> <code>Num</code>. If you’re more used to object-oriented programming languages, you can think of a typeclass as like an interface; it declares the types of some operations,<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> and any types that are instances of the typeclass must provide concrete implementations of those operations with matching types. So it’s actually not impossible that an integer literal could be a function; all we would need is for the type of a function to be an instance of <code>Num</code>. It just isn’t, yet, and that’s what Haskell is ultimately complaining about, above.</p>
<p>Let’s make it one. I’m also going to start writing things in a Haskell source file to make things neater. (This should go without saying, but don’t use this code in production.)</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb10-1" title="1"><span class="ot">{-# LANGUAGE FlexibleInstances #-}</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="kw">instance</span> <span class="dt">Num</span> a <span class="ot">=&gt;</span> <span class="dt">Num</span> (a <span class="ot">-&gt;</span> a) <span class="kw">where</span></a>
<a class="sourceLine" id="cb10-3" title="3">    <span class="fu">fromInteger</span> x <span class="ot">=</span> (<span class="fu">fromInteger</span> x <span class="op">*</span>)</a>
<a class="sourceLine" id="cb10-4" title="4"></a>
<a class="sourceLine" id="cb10-5" title="5">main <span class="ot">=</span> <span class="fu">print</span> (<span class="dv">8</span><span class="op">/</span><span class="dv">2</span>(<span class="dv">2</span><span class="op">+</span><span class="dv">2</span>))</a></code></pre></div>
<p>There are actually several more functions that one should define to make a type a proper instance of <code>Num</code>, which Haskell would warn us about if our code managed to compile, but the only function we need to define to get Haskell to treat numeric literals as our type is <code>fromInteger</code>. The type of <code>fromInteger</code> is <code>Num a =&gt; Integer -&gt; a</code>: for any type that’s an instance of <code>Num</code>, it converts that type to <code>Integer</code>, which is Haskell’s concrete built-in arbitrary-precision integer type.</p>
<p>So, what we’re doing concretely above is telling Haskell how to convert an <code>Integer</code> to a function of type <code>a -&gt; a</code>, where <code>a</code> is any type that’s an instance of the typeclass <code>Num</code>. A function of type <code>a -&gt; a</code> is a function that takes in one argument of type <code>a</code> and returns one value of type <code>a</code>. To do this, we convert <code>x</code> from an <code>Integer</code> to a value of type <code>a</code>, and then partially apply the multiplication function <code>*</code> to it, which produces a function that will multiply its argument by the value we’ve already provided. Because type inference is magic, everything works.</p>
<p>Just kidding:</p>
<pre><code>$ ghc meme.hs
[1 of 1] Compiling Main             ( meme.hs, meme.o )

meme.hs:5:8: error:
    • Ambiguous type variable ‘a0’ arising from a use of ‘print’
      prevents the constraint ‘(Show a0)’ from being solved.
      Probable fix: use a type annotation to specify what ‘a0’ should be.
      These potential instances exist:
        instance Show Ordering -- Defined in ‘GHC.Show’
        instance Show Integer -- Defined in ‘GHC.Show’
        instance Show a =&gt; Show (Maybe a) -- Defined in ‘GHC.Show’
        ...plus 22 others
        ...plus six instances involving out-of-scope types
        (use -fprint-potential-instances to see them all)
    • In the expression: print (8 / 2 (2 + 2))
      In an equation for ‘main’: main = print (8 / 2 (2 + 2))

meme.hs:5:15: error:
    • Ambiguous type variable ‘a0’ arising from the literal ‘8’
      prevents the constraint ‘(Num a0)’ from being solved.
      Probable fix: use a type annotation to specify what ‘a0’ should be.
      These potential instances exist:
        instance Num Integer -- Defined in ‘GHC.Num’
        instance Num a =&gt; Num (a -&gt; a) -- Defined at meme.hs:2:10
        instance Num Double -- Defined in ‘GHC.Float’
        ...plus three others
        ...plus one instance involving out-of-scope types
        (use -fprint-potential-instances to see them all)
    • In the first argument of ‘(/)’, namely ‘8’
      In the first argument of ‘print’, namely ‘(8 / 2 (2 + 2))’
      In the expression: print (8 / 2 (2 + 2))

meme.hs:5:15: error:
    • Ambiguous type variable ‘a0’ arising from a use of ‘/’
      prevents the constraint ‘(Fractional a0)’ from being solved.
      Probable fix: use a type annotation to specify what ‘a0’ should be.
      These potential instances exist:
        instance Fractional Double -- Defined in ‘GHC.Float’
        instance Fractional Float -- Defined in ‘GHC.Float’
        ...plus one instance involving out-of-scope types
        (use -fprint-potential-instances to see them all)
    • In the first argument of ‘print’, namely ‘(8 / 2 (2 + 2))’
      In the expression: print (8 / 2 (2 + 2))
      In an equation for ‘main’: main = print (8 / 2 (2 + 2))

meme.hs:5:17: error:
    • Ambiguous type variables ‘a0’, ‘t0’ arising from the literal ‘2’
      prevents the constraint ‘(Num (t0 -&gt; a0))’ from being solved.
        (maybe you haven&#39;t applied a function to enough arguments?)
      Probable fix: use a type annotation to specify what ‘a0’, ‘t0’ should be.
      These potential instance exist:
        instance Num a =&gt; Num (a -&gt; a) -- Defined at meme.hs:2:10
    • In the expression: 2
      In the second argument of ‘(/)’, namely ‘2 (2 + 2)’
      In the first argument of ‘print’, namely ‘(8 / 2 (2 + 2))’

meme.hs:5:19: error:
    • Ambiguous type variable ‘t0’ arising from a use of ‘+’
      prevents the constraint ‘(Num t0)’ from being solved.
      Probable fix: use a type annotation to specify what ‘t0’ should be.
      These potential instances exist:
        instance Num Integer -- Defined in ‘GHC.Num’
        instance Num a =&gt; Num (a -&gt; a) -- Defined at meme.hs:2:10
        instance Num Double -- Defined in ‘GHC.Float’
        ...plus three others
        ...plus one instance involving out-of-scope types
        (use -fprint-potential-instances to see them all)
    • In the first argument of ‘2’, namely ‘(2 + 2)’
      In the second argument of ‘(/)’, namely ‘2 (2 + 2)’
      In the first argument of ‘print’, namely ‘(8 / 2 (2 + 2))’</code></pre>
<p>The issue here is actually fairly subtle. When Haskell tries to figure out which instance to use to make <code>2</code> a function, the instance we declared <code>instance Num a =&gt; Num (a -&gt; a)</code> is only considered as an option if Haskell explicitly knows that the input and output type of the function it wants are identical. In the code we wrote, it doesn’t know this: it only knows that the input type is the type of <code>2 + 2</code>, which could be any type that’s an instance of <code>Num</code>, and the output type is something that can fill in the blank in the expression <code>print (8 / _)</code>, which could be any type that’s an instance of the two typeclasses <code>Show</code> and <code>Fractional</code> (required for <code>print</code> and <code>/</code>, respectively). It doesn’t even matter if the input and output have the same typeclass constraints. Haskell needs to identify the concrete type of both the input and the output and see that they’re equal in order to choose the instance we wrote. Since it can’t, it errors out saying it couldn’t find an instance.</p>
<p>This error is pointed out by the most important part of the dozens of lines in the error above, which also suggests a fix:</p>
<pre><code>    • Ambiguous type variables ‘a0’, ‘t0’ arising from the literal ‘2’
      prevents the constraint ‘(Num (t0 -&gt; a0))’ from being solved.
        (maybe you haven&#39;t applied a function to enough arguments?)
      Probable fix: use a type annotation to specify what ‘a0’, ‘t0’ should be.</code></pre>
<p>And indeed, we can make it compile by explicitly annotating the type of the <code>2</code> that we want to be a function:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb13-1" title="1"><span class="ot">{-# LANGUAGE FlexibleInstances #-}</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">instance</span> <span class="dt">Num</span> a <span class="ot">=&gt;</span> <span class="dt">Num</span> (a <span class="ot">-&gt;</span> a) <span class="kw">where</span></a>
<a class="sourceLine" id="cb13-3" title="3">    <span class="fu">fromInteger</span> x <span class="ot">=</span> (<span class="fu">fromInteger</span> x <span class="op">*</span>)</a>
<a class="sourceLine" id="cb13-4" title="4"></a>
<a class="sourceLine" id="cb13-5" title="5">main <span class="ot">=</span> <span class="fu">print</span> (<span class="dv">8</span><span class="op">/</span>(<span class="dv">2</span><span class="ot"> ::</span> <span class="dt">Double</span> <span class="ot">-&gt;</span> <span class="dt">Double</span>)(<span class="dv">2</span><span class="op">+</span><span class="dv">2</span>))</a></code></pre></div>
<p>This compiles (with a warning), and it’s an established way of achieving this<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>. But it feels like cheating; we had to insert a random type annotation in the middle of our expression, which feels a bit like inserting the <code>*</code>.</p>
<p>Fortunately, there is a different approach that works, a <a href="https://chrisdone.com/posts/haskell-constraint-trick/">“trick” using the equality constraint</a>:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb14-1" title="1"><span class="ot">{-# LANGUAGE GADTs #-}</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="kw">instance</span> (a <span class="op">~</span> b, <span class="dt">Num</span> b) <span class="ot">=&gt;</span> <span class="dt">Num</span> (a <span class="ot">-&gt;</span> b) <span class="kw">where</span></a>
<a class="sourceLine" id="cb14-3" title="3">    <span class="fu">fromInteger</span> x <span class="ot">=</span> (<span class="fu">fromInteger</span> x <span class="op">*</span>)</a>
<a class="sourceLine" id="cb14-4" title="4"></a>
<a class="sourceLine" id="cb14-5" title="5">main <span class="ot">=</span> <span class="fu">print</span> (<span class="dv">8</span><span class="op">/</span><span class="dv">2</span>(<span class="dv">2</span><span class="op">+</span><span class="dv">2</span>))</a></code></pre></div>
<p>The equality constraint is the <code>a ~ b</code> part, which states that <code>a</code> and <code>b</code> must be the same type (and which we need to enable a totally different language extension to make Haskell support). The difference between this instance and the previous one is that this instance will always be chosen whenever Haskell needs to find a <code>Num</code> instance for a function type. Only <em>after</em> Haskell has decided to use the instance does it check that the constraints are satisfied. In contrast, with the old <code>Num a =&gt; Num (a -&gt; a)</code> instance, Haskell checks that the input and output types are equal <em>before</em> deciding to use it, and this check fails. For further reading, you can consult this <a href="https://stackoverflow.com/questions/11553705/haskell-equality-constraint-in-instance">SO question on the equality constraint</a> and the post it links to, or this <a href="https://blog.infinitenegativeutility.com/2017/1/haskell-type-equality-constraints">post on Equality Constraints</a>, which abuses integer literals in a different way.</p>
<p>With this change, we can finally figure out what Haskell thinks the value of the original mathematical expression is:</p>
<pre><code>$ ghc meme.hs
$ ./meme
1.0</code></pre>
<p>Voilà! Juxtaposition binds more tightly than division.</p>
<h3 id="a-proper-implementation">A proper implementation</h3>
<p>Don’t like warnings? Want to be extra faithful to the original problem and use the obelus for division? You only need to declare six functions to be a full-fledged instance of <code>Num</code>, and Unicode mathematical operators are perfectly legitimate infix operators in Haskell, so we have you covered.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb16-1" title="1"><span class="ot">{-# LANGUAGE GADTs #-}</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="kw">instance</span> (a <span class="op">~</span> b, <span class="dt">Num</span> b) <span class="ot">=&gt;</span> <span class="dt">Num</span> (a <span class="ot">-&gt;</span> b) <span class="kw">where</span></a>
<a class="sourceLine" id="cb16-3" title="3">    (<span class="fu">fromInteger</span> x) y <span class="ot">=</span> <span class="fu">fromInteger</span> x <span class="op">*</span> y</a>
<a class="sourceLine" id="cb16-4" title="4">    (a <span class="op">+</span> b) c <span class="ot">=</span> a c <span class="op">+</span> b c</a>
<a class="sourceLine" id="cb16-5" title="5">    (a <span class="op">-</span> b) c <span class="ot">=</span> a c <span class="op">-</span> b c</a>
<a class="sourceLine" id="cb16-6" title="6">    (a <span class="op">*</span> b) c <span class="ot">=</span> a (b c)</a>
<a class="sourceLine" id="cb16-7" title="7">    (<span class="fu">abs</span> a) b <span class="ot">=</span> <span class="fu">abs</span> (a b) <span class="op">*</span> <span class="fu">signum</span> b</a>
<a class="sourceLine" id="cb16-8" title="8">    (<span class="fu">signum</span> a) b <span class="ot">=</span> <span class="fu">signum</span> (a b) <span class="op">*</span> <span class="fu">abs</span> b</a>
<a class="sourceLine" id="cb16-9" title="9"></a>
<a class="sourceLine" id="cb16-10" title="10">(÷) <span class="ot">=</span> (<span class="op">/</span>)</a>
<a class="sourceLine" id="cb16-11" title="11"></a>
<a class="sourceLine" id="cb16-12" title="12">main <span class="ot">=</span> <span class="fu">print</span> (8÷<span class="dv">2</span>(<span class="dv">2</span><span class="op">+</span><span class="dv">2</span>))</a></code></pre></div>
<p>Want all that in impeccable point-free style? It makes more sense for some of the functions than for others, but whatever floats your boat:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb17-1" title="1"><span class="ot">{-# LANGUAGE GADTs #-}</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="kw">import</span> <span class="dt">Control.Applicative</span> (liftA2, (&lt;*&gt;))</a>
<a class="sourceLine" id="cb17-3" title="3"></a>
<a class="sourceLine" id="cb17-4" title="4"><span class="kw">instance</span> (a <span class="op">~</span> b, <span class="dt">Num</span> b) <span class="ot">=&gt;</span> <span class="dt">Num</span> (a <span class="ot">-&gt;</span> b) <span class="kw">where</span></a>
<a class="sourceLine" id="cb17-5" title="5">    <span class="fu">fromInteger</span> <span class="ot">=</span> (<span class="op">*</span>) <span class="op">.</span> <span class="fu">fromInteger</span></a>
<a class="sourceLine" id="cb17-6" title="6">    (<span class="op">+</span>) <span class="ot">=</span> liftA2 (<span class="op">+</span>)</a>
<a class="sourceLine" id="cb17-7" title="7">    (<span class="op">-</span>) <span class="ot">=</span> liftA2 (<span class="op">-</span>)</a>
<a class="sourceLine" id="cb17-8" title="8">    (<span class="op">*</span>) <span class="ot">=</span> (<span class="op">.</span>)</a>
<a class="sourceLine" id="cb17-9" title="9">    <span class="fu">abs</span> <span class="ot">=</span> (<span class="op">&lt;*&gt;</span> <span class="fu">signum</span>) <span class="op">.</span> (((<span class="op">*</span>) <span class="op">.</span> <span class="fu">abs</span>) <span class="op">.</span>)</a>
<a class="sourceLine" id="cb17-10" title="10">    <span class="fu">signum</span> <span class="ot">=</span> (<span class="op">&lt;*&gt;</span> <span class="fu">abs</span>) <span class="op">.</span> (((<span class="op">*</span>) <span class="op">.</span> <span class="fu">signum</span>) <span class="op">.</span>)</a>
<a class="sourceLine" id="cb17-11" title="11"></a>
<a class="sourceLine" id="cb17-12" title="12">(÷) <span class="ot">=</span> (<span class="op">/</span>)</a>
<a class="sourceLine" id="cb17-13" title="13"></a>
<a class="sourceLine" id="cb17-14" title="14">main <span class="ot">=</span> <span class="fu">print</span> (8÷<span class="dv">2</span>(<span class="dv">2</span><span class="op">+</span><span class="dv">2</span>))</a></code></pre></div>
<p>Of course, the downside is that many nonsensical expressions now typecheck and give nonsensical results:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb18-1" title="1">λ<span class="op">&gt;</span> (<span class="op">+</span><span class="dv">4</span>) (<span class="op">+</span><span class="dv">9</span>) <span class="dv">2</span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="dv">19</span></a></code></pre></div>
<h3 id="bonus-round-scala">Bonus round: Scala</h3>
<p>All we need to do is tell Scala it can implicitly convert any <code>Int</code> into a function that multiplies its argument by that <code>Int</code>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode scala"><code class="sourceCode scala"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">import</span> scala.<span class="fu">language</span>.<span class="fu">implicitConversions</span></a>
<a class="sourceLine" id="cb19-2" title="2"></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="kw">object</span> Meme <span class="kw">extends</span> App {</a>
<a class="sourceLine" id="cb19-4" title="4">  <span class="kw">implicit</span> <span class="kw">def</span> <span class="fu">int2mul</span>(x: Int) = (y: Int) =&gt; x * y</a>
<a class="sourceLine" id="cb19-5" title="5"></a>
<a class="sourceLine" id="cb19-6" title="6">  <span class="fu">println</span>(<span class="dv">8</span>/<span class="dv">2</span>(<span class="dv">2</span>+<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb19-7" title="7">}</a></code></pre></div>
<pre><code>$ scalac Meme.scala
$ scala Meme
1</code></pre>
<p>Unfortunately, I don’t know enough about other programming languages to give more examples.</p>
<section class="footnotes">
<hr />
<ol>
<li id="fn1"><p>If you’re following along at home, I got the prompt by putting <code>:set prompt "λ&gt; "</code> in <code>~/.ghci</code>. See <a href="http://dev.stephendiehl.com/hask/#ghci">What I Wish I Knew When Learning Haskell on GHCi</a>.</p>
<p>Also, I’m using GHC, the Glasgow Haskell Compiler, and I refer to it as Haskell just to keep things simple. This may be considered technically incorrect since there are other Haskell implementations and I’m using lots of GHC extensions that aren’t part of the Haskell specification, but GHC is very canonical.<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>Typically these operations are functions, but they don’t have to be. For example, the <code>Bounded</code> typeclass defines “operations” of the following two types:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">class</span> <span class="dt">Bounded</span> a <span class="kw">where</span></a>
<a class="sourceLine" id="cb8-2" title="2"><span class="ot">  minBound ::</span> a</a>
<a class="sourceLine" id="cb8-3" title="3"><span class="ot">  maxBound ::</span> a</a></code></pre></div>
<p><a href="http://www.learnyouahaskell.com/types-and-typeclasses">Learn You a Haskell</a> describes these as “polymorphic constants”. They are constants of type <code>a</code>, which differ depending on the type.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode haskell"><code class="sourceCode haskell"><a class="sourceLine" id="cb9-1" title="1">λ<span class="op">&gt;</span><span class="ot"> minBound ::</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="op">-</span><span class="dv">9223372036854775808</span></a>
<a class="sourceLine" id="cb9-3" title="3">λ<span class="op">&gt;</span><span class="ot"> maxBound ::</span> <span class="dt">Int</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="dv">9223372036854775807</span></a>
<a class="sourceLine" id="cb9-5" title="5">λ<span class="op">&gt;</span><span class="ot"> minBound ::</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="dt">False</span></a>
<a class="sourceLine" id="cb9-7" title="7">λ<span class="op">&gt;</span><span class="ot"> maxBound ::</span> <span class="dt">Bool</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="dt">True</span></a>
<a class="sourceLine" id="cb9-9" title="9">λ<span class="op">&gt;</span><span class="ot"> minBound ::</span> <span class="dt">Char</span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="ch">&#39;\NUL&#39;</span></a>
<a class="sourceLine" id="cb9-11" title="11">λ<span class="op">&gt;</span><span class="ot"> maxBound ::</span> <span class="dt">Char</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="ch">&#39;\1114111&#39;</span></a></code></pre></div>
<p>The word “operation” is from the Haskell spec.<a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p><a href="https://stackoverflow.com/questions/27754902/is-there-a-way-to-overload-juxtaposition-in-ghc/27755045#27755045">“Is there a way to overload juxtaposition in ghc?”</a>, 2015.<a href="#fnref3" class="footnote-back">↩</a></p></li>
</ol>
</section></article>
	<footer class="post-footer">
		
		<ul class="post-tags">
			
			<li><a href="/tag/haskell"><span class="tag">Haskell</span></a></li>
			
			<li><a href="/tag/nerd-sniping"><span class="tag">Nerd-Sniping</span></a></li>
			
			<li><a href="/tag/scala"><span class="tag">Scala</span></a></li>
			
		</ul>
		
	</footer>
	<script data-isso="//node.vero.site/isso/" data-isso-css="false" src="//node.vero.site/isso/js/embed.min.js"></script>
	<section id="isso-thread"></section>
	<p class="comments-meta">(note: the commenting setup here is experimental and I may not check my comments often; if you want to tell <em>me</em> something instead of the world, email me!)</p>
	
	
	
	<footer class="post-footer">
		<nav class="pagination">
			
			<a class="pagination-previous" href="//blog.vero.site/post/writing">← Writing for the Mundane</a>
			
			
			<a class="pagination-next" href="//blog.vero.site/post/go-to-class">Go to Class (Most of the Time) →</a>
			
		</nav>
	</footer>
</section>
</div>
<footer class="site-footer">
	<p>© 2017-2023 betaveros, Bounded-Error Log</p>
	<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="//i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br />Except where otherwise noted, content on this site is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
	<p>Powered by <a href="https://gohugo.io/">Hugo</a>, <a href="http://pandoc.org/">pandoc</a>,
	<a href="https://www.goatcounter.com/">GoatCounter</a>,
	<a href="https://posativ.org/isso/">Isso</a>,
	<a href="https://pages.github.com/">GitHub Pages</a>, and
	<a href="https://www.cloudflare.com/">CloudFlare</a>.
	</p>
	<p>Opinions are mine and not of any employer, past or present.</p>
</footer>

<script src="/katex/katex.min.js"></script>
<script src="/katex/contrib/auto-render.min.js"></script>
<script>renderMathInElement(document.body);</script>
<script src="/js/bundle.js"></script>
<script>window.goatcounter = { path: function(p) { return '/blog' + p; } }</script>
<script data-goatcounter="https://node.vero.site:8073/count" async src="https://node.vero.site:8073/count.js"></script>
<script src="/js/jquery-3.2.1.min.js"></script>


</body>
</html>
